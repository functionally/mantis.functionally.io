<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>How to Generate Cardano Payment and Stake Keys from a Trezor Model T Seed Phrase</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="how-to-generate-cardano-payment-and-stake-keys-from-a-trezor-model-t-seed-phrase">How to Generate Cardano Payment and Stake Keys from a Trezor Model T Seed Phrase</h1>
<p>Here is a recipe for recovering payment and stake keys if a <a href="https://trezor.io/">Trezor Model T</a> is lost or damaged and a new Trezor Model T is not available. (Note that performing this procedure defeats the purpose of using a hardware wallet, however, since it involves typing seed phrases on a computer.) This procedure also works for seed phrases from <a href="https://daedaluswallet.io/">Daedalus wallets</a> and perhaps also for those from <a href="https://yoroi-wallet.com/">Yoroi wallets</a>. <em>Always use best practices for securing seed phrases and the private/secret key files generated below.</em></p>
<h2 id="prerequisites">Prerequisites</h2>
<p>This procedure requires <a href="https://github.com/input-output-hk/cardano-wallet/tree/master/README.md">cardano-wallet</a> and <a href="https://github.com/input-output-hk/cardano-node/tree/master/cardano-cli/README.md">cardano-cli</a>.</p>
<h2 id="recovering-the-root-private-key.">Recovering the root private key.</h2>
<p>Enter the 12-word passphrase (Trezor Model T) or 24-word passphrase (Shelley wallet on Daedalus) at the prompt to convert it to the root private key:</p>
<pre><code>BASENAME=my-credentials

cardano-wallet key from-recovery-phrase Shelley &gt; $BASENAME.root.prv</code></pre>
<h2 id="generate-payment-keys.">Generate payment keys.</h2>
<p>Now generate the private key <code>$BASENAME.payment-0.prv</code> for the first wallet address, and its corresponding public key <code>$BASENAME.payment-0.pub</code>:</p>
<pre><code>cardano-wallet key child 1852H/1815H/0H/0/0    &lt; $BASENAME.root.prv      &gt; $BASENAME.payment-0.prv
cardano-wallet key public --without-chain-code &lt; $BASENAME.payment-0.prv &gt; $BASENAME.payment-0.pub</code></pre>
<p>Other payment keys can be generated by incrementing the last number in the derivation path <code>1852H/1815H/0H/0/0</code>. The payment keys from Trezor Model T are obtained by incrementing this last digit, but those for Daedalus wallets are obtain from incrementing the last digit of the derivation paths <code>1852H/1815H/0H/0/0</code> and <code>1852H/1815H/0H/1/0</code>.</p>
<p>These keys can be converted to the format most convenient for <code>cardano-cli</code>, using the following commands:</p>
<pre><code>cardano-cli key convert-cardano-address-key --shelley-payment-key \
                                            --signing-key-file $BASENAME.payment-0.prv \
                                            --out-file $BASENAME.payment-0.skey
cardano-cli key verification-key --signing-key-file $BASENAME.payment-0.skey \
                                 --verification-key-file $BASENAME.payment-0.vkey</code></pre>
<p>In particular, <code>$BASENAME.payment-0.skey</code> can be used for signing transactions with <code>cardano-cli</code>: this would allow one to move funds secured by the original wallet.</p>
<h2 id="generate-the-stake-key.">Generate the stake key.</h2>
<p>The procedure for generating the stake key is similar to that for the payment key:</p>
<pre><code>cardano-wallet key child 1852H/1815H/0H/2/0    &lt; $BASENAME.root.prv  &gt; $BASENAME.stake.prv
cardano-wallet key public --without-chain-code &lt; $BASENAME.stake.prv &gt; $BASENAME.stake.pub

cardano-cli key convert-cardano-address-key --shelley-payment-key \
                                            --signing-key-file $BASENAME.staking.prv \
                                            --out-file $BASENAME.staking.skey
cardano-cli key verification-key --signing-key-file $BASENAME.staking.skey \
                                 --verification-key-file $BASENAME.staking.vkey</code></pre>
<h2 id="generate-addresses.">Generate addresses.</h2>
<p>The each payment address is computed from the corresponding payment key and from the stake key:</p>
<pre><code>cardano-cli address build --mainnet \
                          --payment-verification-key $(cat $BASENAME.payment-0.pub) \
                          --stake-verification-key $(cat $BASENAME.staking.pub) \
                          --out-file $BASENAME.payment-0.address</code></pre>
<p>These addresses should match those of the original wallet.</p>
<p>One can also generate the stake address:</p>
<pre><code>cardano-cli stake-address build --mainnet \
                                --stake-verification-key-file $BASENAME.stake.pub \
                                --out-file $BASENAME.stake.address</code></pre>
</body>
</html>
